<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Grade Management | Faculty Portal</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Ffacultypo9167back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="min-h-screen bg-background">
    <!-- Header -->
    <header class="bg-surface border-b border-border shadow-academic">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo & Title -->
                <div class="flex items-center">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center mr-3">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                        </svg>
                    </div>
                    <h1 class="text-xl font-semibold text-text-primary">Faculty Portal</h1>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="faculty_dashboard.html" class="text-text-secondary hover:text-text-primary transition-colors">Dashboard</a>
                    <a href="course_management.html" class="text-text-secondary hover:text-text-primary transition-colors">Courses</a>
                    <a href="attendance_management.html" class="text-text-secondary hover:text-text-primary transition-colors">Attendance</a>
                    <a href="grade_management.html" class="text-primary font-medium">Grades</a>
                    <a href="leave_management.html" class="text-text-secondary hover:text-text-primary transition-colors">Leave</a>
                </nav>

                <!-- User Menu -->
                <div class="flex items-center space-x-4">
                    <button class="p-2 text-text-secondary hover:text-text-primary transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5-5-5h5v-12h5v12z"/>
                        </svg>
                    </button>
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-medium">JD</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <div>
                    <h2 class="text-3xl font-semibold text-text-primary mb-2">Grade Management</h2>
                    <p class="text-text-secondary">Enter, edit, and analyze student grades across assignments and courses</p>
                </div>
                <div class="mt-4 sm:mt-0 flex space-x-3">
                    <button id="importGradesBtn" class="btn-secondary flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
                        </svg>
                        Import CSV
                    </button>
                    <button id="exportGradesBtn" class="btn-primary flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Export
                    </button>
                </div>
            </div>
        </div>

        <!-- Filters Section -->
        <div class="card mb-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label for="courseSelect" class="form-label">Course</label>
                    <select id="courseSelect" class="form-input">
                        <option value>Select Course</option>
                        <option value="cs101" selected>CS 101 - Introduction to Programming</option>
                        <option value="cs201">CS 201 - Data Structures</option>
                        <option value="cs301">CS 301 - Database Systems</option>
                        <option value="math101">MATH 101 - Calculus I</option>
                    </select>
                </div>
                <div>
                    <label for="assignmentFilter" class="form-label">Assignment Type</label>
                    <select id="assignmentFilter" class="form-input">
                        <option value>All Assignments</option>
                        <option value="exam">Exams</option>
                        <option value="quiz">Quizzes</option>
                        <option value="homework">Homework</option>
                        <option value="project">Projects</option>
                    </select>
                </div>
                <div>
                    <label for="gradingScale" class="form-label">Grading Scale</label>
                    <select id="gradingScale" class="form-input">
                        <option value="percentage">Percentage (0-100)</option>
                        <option value="letter">Letter Grades (A-F)</option>
                        <option value="points">Points (0-1000)</option>
                        <option value="gpa">GPA Scale (0-4.0)</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Grade Entry Table -->
            <div class="lg:col-span-3">
                <div class="card">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-text-primary">Grade Entry - CS 101</h3>
                        <div class="flex items-center space-x-2">
                            <button id="addAssignmentBtn" class="btn-secondary text-sm">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                                Add Assignment
                            </button>
                            <button id="calculateGradesBtn" class="btn-primary text-sm">
                                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                </svg>
                                Calculate
                            </button>
                        </div>
                    </div>

                    <!-- Grade Table -->
                    <div class="overflow-x-auto">
                        <table class="min-w-full">
                            <thead>
                                <tr class="bg-surface">
                                    <th class="table-header text-left sticky left-0 bg-surface z-10">Student</th>
                                    <th class="table-header text-center min-w-24">Quiz 1<br /><span class="text-xs font-normal">(10 pts)</span></th>
                                    <th class="table-header text-center min-w-24">Midterm<br /><span class="text-xs font-normal">(100 pts)</span></th>
                                    <th class="table-header text-center min-w-24">Project 1<br /><span class="text-xs font-normal">(50 pts)</span></th>
                                    <th class="table-header text-center min-w-24">Quiz 2<br /><span class="text-xs font-normal">(10 pts)</span></th>
                                    <th class="table-header text-center min-w-24">Final<br /><span class="text-xs font-normal">(100 pts)</span></th>
                                    <th class="table-header text-center min-w-24 bg-primary-50">Average<br /><span class="text-xs font-normal">(%)</span></th>
                                    <th class="table-header text-center min-w-16">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="gradeTableBody">
                                <tr class="hover:bg-surface transition-colors">
                                    <td class="table-cell sticky left-0 bg-background z-10">
                                        <div class="flex items-center">
                                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=32&h=32&fit=crop&crop=face" alt="Student" class="w-8 h-8 rounded-full mr-3" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                            <div>
                                                <div class="font-medium text-text-primary">Alex Johnson</div>
                                                <div class="text-xs text-text-secondary">ID: 2024001</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="85" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="92" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="88" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="90" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value min="0" max="100" placeholder="--" />
                                    </td>
                                    <td class="table-cell text-center bg-primary-50 font-semibold text-primary">89.2%</td>
                                    <td class="table-cell text-center">
                                        <button class="text-text-secondary hover:text-primary transition-colors">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-surface transition-colors">
                                    <td class="table-cell sticky left-0 bg-background z-10">
                                        <div class="flex items-center">
                                            <img src="https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?w=32&h=32&fit=crop&crop=face" alt="Student" class="w-8 h-8 rounded-full mr-3" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                            <div>
                                                <div class="font-medium text-text-primary">Sarah Chen</div>
                                                <div class="text-xs text-text-secondary">ID: 2024002</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="95" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="88" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="94" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="92" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value min="0" max="100" placeholder="--" />
                                    </td>
                                    <td class="table-cell text-center bg-primary-50 font-semibold text-primary">92.3%</td>
                                    <td class="table-cell text-center">
                                        <button class="text-text-secondary hover:text-primary transition-colors">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-surface transition-colors">
                                    <td class="table-cell sticky left-0 bg-background z-10">
                                        <div class="flex items-center">
                                            <img src="https://cdn.pixabay.com/photo/2016/11/21/12/42/beard-1845166_1280.jpg" alt="Student" class="w-8 h-8 rounded-full mr-3 object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                            <div>
                                                <div class="font-medium text-text-primary">Michael Rodriguez</div>
                                                <div class="text-xs text-text-secondary">ID: 2024003</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="78" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="85" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="82" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="88" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value min="0" max="100" placeholder="--" />
                                    </td>
                                    <td class="table-cell text-center bg-primary-50 font-semibold text-primary">83.3%</td>
                                    <td class="table-cell text-center">
                                        <button class="text-text-secondary hover:text-primary transition-colors">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-surface transition-colors">
                                    <td class="table-cell sticky left-0 bg-background z-10">
                                        <div class="flex items-center">
                                            <img src="https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?w=32&h=32&fit=crop&crop=face" alt="Student" class="w-8 h-8 rounded-full mr-3" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                                            <div>
                                                <div class="font-medium text-text-primary">Emily Davis</div>
                                                <div class="text-xs text-text-secondary">ID: 2024004</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="92" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="96" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="90" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value="94" min="0" max="100" />
                                    </td>
                                    <td class="table-cell text-center">
                                        <input type="number" class="w-16 px-2 py-1 text-center border border-border rounded focus:ring-2 focus:ring-primary-500 focus:border-primary-500" value min="0" max="100" placeholder="--" />
                                    </td>
                                    <td class="table-cell text-center bg-primary-50 font-semibold text-primary">93.0%</td>
                                    <td class="table-cell text-center">
                                        <button class="text-text-secondary hover:text-primary transition-colors">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Table Footer -->
                    <div class="mt-4 pt-4 border-t border-border">
                        <div class="flex items-center justify-between text-sm text-text-secondary">
                            <div>Showing 4 of 28 students</div>
                            <div class="flex items-center space-x-2">
                                <span>Class Average: <span class="font-semibold text-primary">89.5%</span></span>
                                <span class="mx-2">â€¢</span>
                                <span>Last Updated: Sep 5, 2025 at 1:45 PM</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Sidebar -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Grade Distribution -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Grade Distribution</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">A (90-100%)</span>
                            <div class="flex items-center">
                                <div class="w-16 bg-border rounded-full h-2 mr-2">
                                    <div class="bg-success-500 h-2 rounded-full" style="width: 45%"></div>
                                </div>
                                <span class="text-sm font-medium">45%</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">B (80-89%)</span>
                            <div class="flex items-center">
                                <div class="w-16 bg-border rounded-full h-2 mr-2">
                                    <div class="bg-primary h-2 rounded-full" style="width: 35%"></div>
                                </div>
                                <span class="text-sm font-medium">35%</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">C (70-79%)</span>
                            <div class="flex items-center">
                                <div class="w-16 bg-border rounded-full h-2 mr-2">
                                    <div class="bg-warning-500 h-2 rounded-full" style="width: 15%"></div>
                                </div>
                                <span class="text-sm font-medium">15%</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">D (60-69%)</span>
                            <div class="flex items-center">
                                <div class="w-16 bg-border rounded-full h-2 mr-2">
                                    <div class="bg-error-500 h-2 rounded-full" style="width: 5%"></div>
                                </div>
                                <span class="text-sm font-medium">5%</span>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">F (0-59%)</span>
                            <div class="flex items-center">
                                <div class="w-16 bg-border rounded-full h-2 mr-2">
                                    <div class="bg-error-600 h-2 rounded-full" style="width: 0%"></div>
                                </div>
                                <span class="text-sm font-medium">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Class Statistics -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Class Statistics</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">Class Average</span>
                            <span class="text-lg font-semibold text-primary">89.5%</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">Highest Grade</span>
                            <span class="text-sm font-medium text-success-600">96.2%</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">Lowest Grade</span>
                            <span class="text-sm font-medium text-error-600">72.1%</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">Standard Deviation</span>
                            <span class="text-sm font-medium">8.3</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-text-secondary">Median</span>
                            <span class="text-sm font-medium">88.7%</span>
                        </div>
                    </div>
                </div>

                <!-- Assignment Performance -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Assignment Performance</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-sm font-medium text-text-primary">Quiz 1</div>
                                <div class="text-xs text-text-secondary">Average: 86.3%</div>
                            </div>
                            <div class="w-12 h-12 relative">
                                <svg class="w-12 h-12 transform -rotate-90" viewBox="0 0 36 36">
                                    <path class="text-border" stroke="currentColor" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                    <path class="text-success-500" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="86.3, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-xs font-medium">86%</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-sm font-medium text-text-primary">Midterm</div>
                                <div class="text-xs text-text-secondary">Average: 90.2%</div>
                            </div>
                            <div class="w-12 h-12 relative">
                                <svg class="w-12 h-12 transform -rotate-90" viewBox="0 0 36 36">
                                    <path class="text-border" stroke="currentColor" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                    <path class="text-primary" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="90.2, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-xs font-medium">90%</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-sm font-medium text-text-primary">Project 1</div>
                                <div class="text-xs text-text-secondary">Average: 88.5%</div>
                            </div>
                            <div class="w-12 h-12 relative">
                                <svg class="w-12 h-12 transform -rotate-90" viewBox="0 0 36 36">
                                    <path class="text-border" stroke="currentColor" stroke-width="3" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                    <path class="text-accent" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="88.5, 100" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-xs font-medium">89%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <h3 class="text-lg font-semibold text-text-primary mb-4">Quick Actions</h3>
                    <div class="space-y-2">
                        <button class="w-full btn-secondary text-left justify-start">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            Generate Report
                        </button>
                        <button class="w-full btn-secondary text-left justify-start">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                            </svg>
                            Email Grades
                        </button>
                        <button class="w-full btn-secondary text-left justify-start">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"/>
                            </svg>
                            Grade Curve
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Assignment Modal -->
    <div id="addAssignmentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-background rounded-lg shadow-academic-xl max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-text-primary">Add New Assignment</h3>
                    <button id="closeAssignmentModal" class="text-text-secondary hover:text-text-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                <form id="addAssignmentForm" class="space-y-4">
                    <div>
                        <label class="form-label">Assignment Name</label>
                        <input type="text" class="form-input" placeholder="e.g., Quiz 3, Final Project" required />
                    </div>
                    <div>
                        <label class="form-label">Assignment Type</label>
                        <select class="form-input" required>
                            <option value>Select Type</option>
                            <option value="quiz">Quiz</option>
                            <option value="exam">Exam</option>
                            <option value="homework">Homework</option>
                            <option value="project">Project</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Total Points</label>
                        <input type="number" class="form-input" placeholder="100" min="1" required />
                    </div>
                    <div>
                        <label class="form-label">Due Date</label>
                        <input type="date" class="form-input" required />
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button type="button" id="cancelAssignment" class="flex-1 btn-secondary">Cancel</button>
                        <button type="submit" class="flex-1 btn-primary">Add Assignment</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Import CSV Modal -->
    <div id="importModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-background rounded-lg shadow-academic-xl max-w-md w-full mx-4">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-text-primary">Import Grades from CSV</h3>
                    <button id="closeImportModal" class="text-text-secondary hover:text-text-primary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                <div class="space-y-4">
                    <div class="border-2 border-dashed border-border rounded-lg p-6 text-center">
                        <svg class="w-12 h-12 mx-auto text-text-secondary mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"/>
                        </svg>
                        <p class="text-text-secondary mb-2">Drop your CSV file here or</p>
                        <button class="btn-primary">Choose File</button>
                        <input type="file" accept=".csv" class="hidden" />
                    </div>
                    <div class="text-xs text-text-secondary">
                        <p class="mb-1"><strong>CSV Format:</strong> Student ID, Assignment 1, Assignment 2, ...</p>
                        <p>First row should contain headers</p>
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button type="button" id="cancelImport" class="flex-1 btn-secondary">Cancel</button>
                        <button type="button" class="flex-1 btn-primary">Import Grades</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Modal functionality
        const addAssignmentBtn = document.getElementById('addAssignmentBtn');
        const addAssignmentModal = document.getElementById('addAssignmentModal');
        const closeAssignmentModal = document.getElementById('closeAssignmentModal');
        const cancelAssignment = document.getElementById('cancelAssignment');

        const importGradesBtn = document.getElementById('importGradesBtn');
        const importModal = document.getElementById('importModal');
        const closeImportModal = document.getElementById('closeImportModal');
        const cancelImport = document.getElementById('cancelImport');

        // Show/hide modals
        addAssignmentBtn.addEventListener('click', () => {
            addAssignmentModal.classList.remove('hidden');
            addAssignmentModal.classList.add('flex');
        });

        [closeAssignmentModal, cancelAssignment].forEach(btn => {
            btn.addEventListener('click', () => {
                addAssignmentModal.classList.add('hidden');
                addAssignmentModal.classList.remove('flex');
            });
        });

        importGradesBtn.addEventListener('click', () => {
            importModal.classList.remove('hidden');
            importModal.classList.add('flex');
        });

        [closeImportModal, cancelImport].forEach(btn => {
            btn.addEventListener('click', () => {
                importModal.classList.add('hidden');
                importModal.classList.remove('flex');
            });
        });

        // Close modals on outside click
        [addAssignmentModal, importModal].forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                }
            });
        });

        // Grade calculation
        const calculateGradesBtn = document.getElementById('calculateGradesBtn');
        calculateGradesBtn.addEventListener('click', () => {
            const rows = document.querySelectorAll('#gradeTableBody tr');
            rows.forEach(row => {
                const inputs = row.querySelectorAll('input[type="number"]');
                const averageCell = row.querySelector('.bg-primary-50');
                
                let total = 0;
                let count = 0;
                
                inputs.forEach(input => {
                    if (input.value && !isNaN(input.value)) {
                        total += parseFloat(input.value);
                        count++;
                    }
                });
                
                if (count > 0) {
                    const average = (total / count).toFixed(1);
                    averageCell.textContent = `${average}%`;
                }
            });
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'fixed top-4 right-4 alert-success z-50';
            successMsg.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    Grades calculated successfully!
                </div>
            `;
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                successMsg.remove();
            }, 3000);
        });

        // Export functionality
        const exportGradesBtn = document.getElementById('exportGradesBtn');
        exportGradesBtn.addEventListener('click', () => {
            // Simulate export
            const successMsg = document.createElement('div');
            successMsg.className = 'fixed top-4 right-4 alert-success z-50';
            successMsg.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    Grades exported successfully!
                </div>
            `;
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                successMsg.remove();
            }, 3000);
        });

        // Real-time grade updates
        document.addEventListener('input', (e) => {
            if (e.target.type === 'number' && e.target.closest('#gradeTableBody')) {
                const row = e.target.closest('tr');
                const inputs = row.querySelectorAll('input[type="number"]');
                const averageCell = row.querySelector('.bg-primary-50');
                
                let total = 0;
                let count = 0;
                
                inputs.forEach(input => {
                    if (input.value && !isNaN(input.value)) {
                        total += parseFloat(input.value);
                        count++;
                    }
                });
                
                if (count > 0) {
                    const average = (total / count).toFixed(1);
                    averageCell.textContent = `${average}%`;
                }
            }
        });

        // Course filter functionality
        const courseSelect = document.getElementById('courseSelect');
        courseSelect.addEventListener('change', (e) => {
            // Simulate course change
            const courseName = e.target.options[e.target.selectedIndex].text;
            document.querySelector('.card h3').textContent = `Grade Entry - ${courseName.split(' - ')[0]}`;
        });

        // Form submission
        const addAssignmentForm = document.getElementById('addAssignmentForm');
        addAssignmentForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Close modal
            addAssignmentModal.classList.add('hidden');
            addAssignmentModal.classList.remove('flex');
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'fixed top-4 right-4 alert-success z-50';
            successMsg.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    Assignment added successfully!
                </div>
            `;
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                successMsg.remove();
            }, 3000);
            
            // Reset form
            addAssignmentForm.reset();
        });

        // Authentication check
        window.addEventListener('load', () => {
            const user = localStorage.getItem('facultyUser');
            if (!user) {
                window.location.href = 'login.html';
            }
        });
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>